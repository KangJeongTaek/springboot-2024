<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" layout:decorate="~{layout}">
  <div layout:fragment="main-content" class="container my-3">
    <table class="table table-light table-striped">
      <thead class="table-dark text-center">
        <tr class="text-center">
          <th>번호</th>
          <th style="width:60%;">제목</th>
          <th>작성자</th>
          <th>작성일</th>
        </tr>
      </thead>
      <tr th:each="board, loop: ${paging}" class="text-center">
        <td th:text="${paging.getTotalElements - (paging.number * paging.size)-loop.index}" class="text-center"></td>
        <td class="text-start">
          <a
            th:href="@{|/board/detail/${board.bno}|}"
            th:text="${board.title}"
          ></a>
          <span class="badge text-bg-success" th:if="${#lists.size(board.replayList) >0}" th:text="${#lists.size(board.replayList)}"></span>
        </td>
        <!-- 작성자추가 -->
        <td>
          <span th:if="${board.writer != null}" th:text="${board.writer.username}"></span>
        </td>
        <td>
          [[${#temporals.format(board.createDate,"yyyy-MM-dd HH:mm:ss")}]]
        </td>
      </tr>
    </table>
    <!-- 페이징 시작 -->
    <div th:if="${!paging.isEmpty()}">
      <ul class="pagination justify-content-center">
        <li class="page-item" th:classappend="${!paging.hasPrevious} ? disabled"><a class="page-link" th:href="@{|?page=0|}">처음</a></li>
          <li class="page-item" th:classappend="${!paging.hasPrevious} ? disabled"><a class="page-link" th:href="@{|?page=${paging.number-1}|}">이전</a></li>
          <li th:each="page : ${#numbers.sequence(0,paging.totalPages-1)}" th:if="${page >= paging.number-5 and page <= paging.number+5}" th:classappend="${page == paging.number} ? active" class="page-item">
            <a class="page-link" th:href="@{|?page=${page}|}" th:text="${page + 1}"></a>
          </li>
          <li class="page-item" th:classappend="${!paging.hasNext} ? disabled"><a class="page-link" th:href="@{|?page=${paging.number+1}|}">다음</a></li>
          <li class="page-item" th:classappend="${!paging.hasNext} ? disabled"><a class="page-link" th:href="@{|?page=${paging.totalPages-1}|}">끝</a></li>
      </ul>
    </div>
    <a th:href="@{/board/create}" class="btn btn-sm btn-primary my-2">게시글 등록</a>
  </div>
</html>
